<html lang="th">
    <head>
       <meta charset="UTF-8" />
	   <meta name="viewport" content="width=device-width, initial-scale=1" />
	   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    </head>
<body>

    <form>
        ‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö: <textarea name="msg"  id= "msg" rows="20" cols="30">‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô‡∏á‡∏ß‡∏î16/2/67
‡∏ö‡∏ô
267-836-872-905-415-972-362-417-915-942-259-805-426
‡πÄ‡∏ï‡πá‡∏á-‡πÇ‡∏ï‡πä‡∏î ‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏¢

‡∏ö‡∏ô-‡∏•‡πà‡∏≤‡∏á
05-50-14-41-15-51-24-42-26-62-28-82-59-95-67-76-38-83
‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏¢

‡πÄ‡∏•‡∏Ç‡∏î‡∏±‡∏á‡πÄ‡∏•‡∏Ç‡∏Æ‡∏∑‡∏≠ ‡πÄ‡∏•‡∏Ç‡∏•‡πâ‡∏ô‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏Å‡∏£‡∏ì‡∏µ
‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤‡πÄ‡∏•‡∏Ç‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏à‡πâ‡∏≤‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡∏ó‡∏∏‡∏Å‡∏Å‡∏£‡∏ì‡∏µ</textarea><br>
        ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°: <textarea name="msg"  id= "res" rows="20" cols="30"></textarea><br>
		<br/>
        <button id="btnGen">Generate</button>&nbsp;<button id="btnLine">Line</button>
    </form> 

<script type="text/javascript">
	document.getElementById("btnGen").addEventListener("click", onGenerate);
var sortAlphabets = function(text) {
    return text.split('').sort().join('');
};

	function onGenerate(e) {
	  let res = document.getElementById("res");
	  var msg = document.getElementById("msg").value;

	  var reg = /([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{2,4})/g;

	  let dt = msg.match(reg);
	  msg = msg.replace(reg,"");

	  reg = /([0-9]{2,3})/g;
	  let srcdigits = msg.match(reg);
	  var digits = [];

	  srcdigits.forEach((elm) => {
		elm = sortAlphabets(elm);
		if(!digits.includes(elm)){
			digits.push(elm);
		} 
	  });

	digits.sort(function(a, b) {
	  return a.length - b.length || a.localeCompare(b)
	});

	var sdigits = digits.join(',');
	navigator.clipboard.writeText(sdigits);

	reg = /([0-9]{1,4})/g;
	let adt = dt[0].match(reg);
	var months_th_mini = [ "‡∏°.‡∏Ñ.", "‡∏Å.‡∏û.", "‡∏°‡∏µ.‡∏Ñ.", "‡πÄ‡∏°.‡∏¢.", "‡∏û.‡∏Ñ.", "‡∏°‡∏¥.‡∏¢.", "‡∏Å.‡∏Ñ.", "‡∏™.‡∏Ñ.", "‡∏Å.‡∏¢.", "‡∏ï.‡∏Ñ.", "‡∏û.‡∏¢.", "‡∏ò.‡∏Ñ.", ];
	var txt = "‚õîÔ∏è ‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡πâ‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà " + adt[0] + " " + months_th_mini[parseInt(adt[1]) - 1] + " ";
	txt = txt + adt[2] + "‚õîÔ∏è\r\n";
	txt = txt + digits.join(" / ") + "\r\n‚ùå ‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡∏Å‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡∏à‡πà‡∏≤‡∏¢ ‡∏ö‡∏ô/‡∏•‡πà‡∏≤‡∏á/‡πÇ‡∏ï‡πä‡∏î ‡∏Å‡∏•‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡∏ï‡∏π\r\n‡∏ö‡∏ô/‡∏•‡πà‡∏≤‡∏á/‡πÇ‡∏ï‡πä‡∏î ‡∏Å‡∏•‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡∏ï‡∏π ‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤\r\nüö¶ ‡πÄ‡∏•‡∏Ç‡∏î‡∏±‡∏á ‡πÄ‡∏•‡∏Ç‡∏Æ‡∏∑‡∏≠ ‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏ç‡πà ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏Å‡∏£‡∏ì‡∏µ\r\nüïï ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö 14.00\r\nüç∫ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏±‡∏ö üç∫";

	  res.value=txt;
	  e.preventDefault();
	}

	$(document).ready(function(){
		$('#btnLine').click(e=>{
			e.preventDefault();
			var id=1;
			var a=[];
			while($('#cus' + id).length){
				if($('#cus' + id).is(':checked')){
					a.push($('#cus' + id).val());
				}
				id++;
			}
			var s = a.join(' , ');
			//alert(s);

			$.ajax({
				type: "POST",
				url: "sendline.php",
				data: JSON.stringify({"msg":$("#res").val(),"customers":a}),
				contentType: "application/json",
				success: function(res){
					console.log(res);
				}
			});

		});
	})
</script>


</body>
</html>